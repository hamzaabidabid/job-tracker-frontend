<div *ngIf="job$ | async as job" class="job-detail-container">
  <mat-card class="job-detail-card">
    <!-- En-tête principal de la carte -->
    <mat-card-header class="card-main-header">
      <div class="header-content">
        <div class="title-section">
          <h1 class="main-title">{{ job.nom }}</h1>
          <h2 class="company-name">{{ job.entreprise.nom }}</h2>
        </div>
        <div class="company-details">
          <div class="detail-line">
            <!-- Icône "location_on" est parfaite, on la garde -->
            <mat-icon>location_on</mat-icon>
            <span>{{ job.entreprise.ville }} - {{ job.entreprise.adresse }}</span>
          </div>
          <div class="detail-line">
            <!-- NOUVELLE ICÔNE : "apartment" pour le secteur/industrie -->
            <mat-icon>apartment</mat-icon>
            <span>{{ job.entreprise.secteur }}</span>
          </div>
        </div>
      </div>
    </mat-card-header>

    <!-- Contenu de la carte -->
    <mat-card-content>
      <!-- Section Compétences -->
      <div class="section">
        <h3 class="section-title">
          <mat-icon class="section-icon">code</mat-icon> <!-- NOUVELLE ICÔNE -->
          Compétences Requises
        </h3>
        <mat-chip-listbox aria-label="Compétences requises">
          <mat-chip *ngFor="let skill of job.requiredSkills" class="skill-chip" disabled>
            {{ skill.name }}
          </mat-chip>
        </mat-chip-listbox>
      </div>

      <mat-divider></mat-divider>

      <!-- Section Description -->
      <div class="section">
        <h3 class="section-title">
          <mat-icon class="section-icon">description</mat-icon> <!-- NOUVELLE ICÔNE -->
          Description de l'offre
        </h3>
        <div class="description-content" [innerHTML]="job.description | formatDescription"></div>
      </div>

      <mat-divider></mat-divider>

      <!-- Section Détails -->
      <div class="section">
        <h3 class="section-title">
          <mat-icon class="section-icon">info</mat-icon> <!-- NOUVELLE ICÔNE -->
          Détails
        </h3>
        <div class="details-section">
          <!-- Statut -->
          <div class="detail-item">
            <!-- NOUVELLE ICÔNE : "hourglass_empty" pour "en cours", etc. -->
            <mat-icon class="detail-icon">hourglass_empty</mat-icon>
            <div class="detail-text">
              <span class="detail-label">Statut</span>
              <span class="detail-value status-chip" [ngClass]="job.status">{{ job.status | titlecase }}</span>
            </div>
          </div>
          <!-- Date de candidature -->
          <div class="detail-item">
            <!-- NOUVELLE ICÔNE : "send" pour l'envoi de la candidature -->
            <mat-icon class="detail-icon">send</mat-icon>
            <div class="detail-text">
              <span class="detail-label">Date de candidature</span>
              <span class="detail-value">{{ job.dateCandidature | date:'fullDate':'':'fr-FR' }}</span>
            </div>
          </div>
          <!-- Date de lancement -->
          <div class="detail-item" *ngIf="job.dateLancement">
            <!-- NOUVELLE ICÔNE : "campaign" pour l'annonce -->
            <mat-icon class="detail-icon">campaign</mat-icon>
            <div class="detail-text">
              <span class="detail-label">Offre publiée le</span>
              <span class="detail-value">{{ job.dateLancement | date:'fullDate':'':'fr-FR' }}</span>
            </div>
          </div>
          <!-- URL -->
          <div class="detail-item" *ngIf="job.urlOffre">
            <!-- Icône "link" est parfaite, on la garde -->
            <mat-icon class="detail-icon">link</mat-icon>
            <div class="detail-text">
              <span class="detail-label">URL de l'offre</span>
              <a class="detail-value link" [href]="job.urlOffre" target="_blank">Voir l'offre originale</a>
            </div>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
